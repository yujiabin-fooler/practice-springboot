<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jiabin.encrypt.filed.likequery.mapper.UserMapper">
	
	<resultMap id="UserMap" type="User">
		<id column="id" property="id"/>
		<result column="name" property="name"/>
		<result column="phone" property="phone" typeHandler="com.jiabin.encrypt.filed.likequery.handler.DecryptTypeHandler"/>
		<result column="id_no" property="idNo" typeHandler="com.jiabin.encrypt.filed.likequery.handler.DecryptTypeHandler"/>
		<result column="addr" property="addr"/>
	</resultMap>
	
	<select id="queryUsers" resultMap="UserMap">
		SELECT * FROM t_user T
		<where>
			<if test="idNo != '' and idNo != null">
				<![CDATA[
					AND (
						T.key_like_id_no LIKE CONCAT('%', #{idNo}, '%')
					)
				]]>
			</if>
		</where>
	</select>
</mapper>
